---
title: Sprite Batch
date: 2018-08-01
categories:
- Game
tags:
- Development
- Graphics
- OpenGL
- Game
- Java
---

그래픽스 라이브러리들은 엔지니어가 랜더링을 편리하게 해주는 고마운 존재다. 하지만 일반적으로 랜더링을 위한 메서드 호출을 의미하는 드로우 콜은 줄이면 줄일 수록 좋다고 말한다. 많은 드로우 콜은 프레임 레이트에 치명적인 영향을 줄 수 있기 때문이다.

## 드로우 콜이 비싼가?

옛날 버전의 라이브러리의 경우 컨텍스트 스위칭이 많이 필요했지만 실제 최근 그래픽 라이브러리의 드로우 콜의 비용은 그렇게 크지않다. GPU가 폴리곤을 변환하고 랜더링할 수 있기 때문이다.

하지만 CPU가 한번의 드로우 콜마다 적은 수의 폴리곤을 GPU에게 넘겨 주게 된다면 GPU의 처리속도를 CPU가 따라가지 못해 CPU 바운드가 발생한다. 실제로 드로우 콜을 위한 버텍스 설정이나 쉐이더 설정과 같은 비용이 들긴 하지만 성능에 영향을 주는 가장 큰 요소는 CPU 바운드이다.

그렇다면 이러한 CPU 바운드를 해결하기 위한 방법은 무엇일까? 바로 한번에 많은 폴리곤 데이터를 GPU에게 넘겨주는 것이다. 앞서 CPU 바운드가 나타나는 원인은 GPU의 랜더링 처리의 코스트는 그렇게 크지 않기 때문이다. 그렇기 때문에 한번에 많은 작업을 GPU에게 할당하여 CPU 바운드를 피할 수 있다.

# Batch, Batch, Batch!

